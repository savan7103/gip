<!DOCTYPE html>
<html lang="en-US" dir="ltr">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Integratedindia</title>
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicons/fiveicon.ico" />
    <meta name="theme-color" content="#ffffff" />
    <link href="assets/css/theme.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="assets/css/Bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
</head>

<body>

    <div class="bg-b">
        <div class="container bg-transparent ">
            <a class="navbar-brand " href="#"><img class="my-3"
                    src="assets/images/integrated-enterprises-india-pvt-ltd.webp" style="width:350px;" alt=""></a>
        </div>
    </div>

    <section class="">
        <div class="container pt-5 pb-120">
            <div class="row">
                <div class="col-md-8">
                    <h2 class="text-center">Protect Plus Calculator</h2>
                    <form id="calculator-form">
                        <!-- Short Term Loans Section -->
                        <div class="row">
                            <div class="col-md-6 my-2">
                                <div class="form-group">
                                    <label for="short-term-loans" class="form-label"><b>Short Term Loans <br> (Personal Loan / Credit Card / Auto Loan)</b></label>
                                    <select id="short-term-loans" class="form-control">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                    <div class="mt-3" id="short-term-loans-amount-section" style="display:none;">
                                        <label for="short-term-loans-amount" class="form-label">Outstanding Amount</label>
                                        <input type="text" id="short-term-loans-amount" class="form-control formatnumber" placeholder="Enter amount" />
                                    </div>
                                </div>
                            </div>
                    
                            <div class="col-md-6 my-2">
                                <div class="form-group">
                                    <label for="long-term-loans" class="form-label"><b>Long Term Loans <br> (Housing Loan)</b></label>
                                    <select id="long-term-loans" class="form-control">
                                        <option value="no">No</option>
                                        <option value="yes">Yes</option>
                                    </select>
                                    <div class="mt-3" id="long-term-loans-amount-section" style="display:none;">
                                        <label for="long-term-loans-amount" class="form-label">Outstanding Amount</label>
                                        <input type="text" id="long-term-loans-amount" class="form-control formatnumber" placeholder="Enter amount" />
                                    </div>
                                </div>
                            </div>
                    
                            <div class="col-md-4 my-2">
                                <div class="form-group">
                                    <label for="income-replacement-years" class="form-label"><b>Income Replacement Duration</b></label>
                                    <input type="number" id="income-replacement-years" class="form-control" placeholder="Enter number of years" required />
                                </div>
                            </div>
                    
                            <div class="col-md-4 my-2">
                                <div class="form-group">
                                    <label for="monthly-income" class="form-label"><b>Income Details</b></label>
                                    <input type="text" id="monthly-income" class="form-control formatnumber" placeholder="Enter monthly income" required />
                                </div>
                            </div>
                    
                            <div class="col-md-4 my-2">
                                <div class="form-group">
                                    <label for="goal-amount" class="form-label"><b>Specific Goals</b></label>
                                    <input type="text" id="goal-amount" class="form-control formatnumber" placeholder="Enter goal amount" required />
                                </div>
                            </div>
                    
                            <div class="col-md-12    my-2">
                                <div class="form-group">
                                    <label for="family-member-1-age" class="form-label"><b>Family Members Age</b></label>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <label for="family-member-1-age" class="form-label">Member 1</label>
                                            <input type="number" id="family-member-1-age" class="form-control" placeholder="Enter age" required />
                                        </div>
                                        <div class="col-md-4">
                                            <label for="family-member-2-age" class="form-label">Member 2</label>
                                            <input type="number" id="family-member-2-age" class="form-control" placeholder="Enter age" required />
                                        </div>
                                        <div class="col-md-4">
                                            <label for="family-member-3-age" class="form-label">Member 3</label>
                                            <input type="number" id="family-member-3-age" class="form-control" placeholder="Enter age" required />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Calculate Button -->
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-primary btn-lg" id="calculate-btn">Calculate</button>
                        </div>
                    </form>
                    

                    <!-- Validation Error Section -->
                    <div class="alert alert-danger mt-3" id="validation-error" style="display:none;">
                        <strong>Error!</strong> Please fill in all required fields.
                    </div>

                    <!-- Result Section -->
                    <div class="card my-4" id="result-section" style="display:none;">
                        <div class="card-header">Calculation Results</div>
                        <div class="card-body">
                            <p><strong>Short Term Loan Outstanding:</strong> ₹<span
                                    id="short-term-loans-outstanding"></span></p>
                            <p><strong>Long Term Loan Outstanding:</strong> ₹<span
                                    id="long-term-loans-outstanding"></span></p>
                            <p><strong>Specific Goal Amount:</strong> ₹<span id="goal-required"></span></p>
                            <p><strong>Total Life Insurance Required:</strong> ₹<span
                                    id="life-insurance-required"></span></p>
                            <p><strong>Family Members Insurance Cover:</strong> <span id="member-insurance"></span></p>

                        </div>
                    </div>
                </div>

                <div class="col-md-4 mb-3 mb-md-0 exist-img">
                    <img src="assets/images/platform.webp" class="img-fluid" alt="accordion" />
                </div>
            </div>
        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        document.addEventListener('input', function (event) {
            // Check if the event target has the class 'formatnumber'
            if (event.target.classList.contains('formatnumber')) {
                // Get the numeric value only
                let value = event.target.value.replace(/[^0-9]/g, '');
        
                // If the value is empty, clear the input and return
                if (!value) {
                    event.target.value = '';
                    return;
                }
        
                // Convert the number to Indian numbering format
                let formattedValue = formatIndianCurrency(value);
        
                // Update the input field with the formatted value
                event.target.value = formattedValue;
            }
        });
        
        function formatIndianCurrency(value) {
            // Convert the number to a string
            value = value.toString();
        
            // Split the value into the integer and decimal parts (if any)
            let [integer, decimal] = value.split('.');
        
            // Apply Indian numbering format to the integer part
            let lastThree = integer.slice(-3);
            let otherNumbers = integer.slice(0, -3);
        
            if (otherNumbers) {
                lastThree = ',' + lastThree;
            }
        
            let formatted = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThree;
        
            // Append the decimal part (if any)
            if (decimal) {
                formatted += '.' + decimal;
            }
        
            return formatted;
        }
        
        
    </script>
    <script>$(document).ready(function () {
            // Utility function to parse input values
            function parseInputAmount(value) {
                return parseFloat(value?.replace(/,/g, '')) || 0; // Safely parse number and handle undefined/null
            }

            // Utility function to format numbers
            function formatNumber(value) {
                return value.toLocaleString('en-IN'); // Format numbers as per Indian number format
            }
            // Handle dynamic display of loan sections
            $('#short-term-loans').change(function () {
                $('#short-term-loans-amount-section').toggle($(this).val() === 'yes');
            });

            $('#long-term-loans').change(function () {
                $('#long-term-loans-amount-section').toggle($(this).val() === 'yes');
            });
            // Utility function to get an icon for family member age
            function getAgeIcon(age) {
                let icon = '';
                if (age < 25) {
                    icon = '<img class="age-icon" src="assets/images/child.png" alt="Child Icon">';
                } else if (age >= 25 && age <= 40) {
                    icon = '<img class="age-icon" src="assets/images/young.png" alt="Young Icon">';
                } else if (age > 40) {
                    icon = '<img class="age-icon" src="assets/images/old.png" alt="Old Icon">';
                }
                return icon ? `<div class="d-flex align-items-center">${icon}</div>` : '';
            }

            // Event handler for the Calculate button
            $('#calculate-btn').click(function () {
                $('#validation-error').hide(); // Hide validation error initially

                // Check if all required fields are filled
                const requiredFieldsEmpty = $('input[required]').filter(function () {
                    return !this.value;
                }).length;

                if (requiredFieldsEmpty) {
                    $('#validation-error').show(); // Show validation error if required fields are empty
                    return;
                }

                // Get input values
                const shortTermLoans = $('#short-term-loans').val() === 'yes' ? parseInputAmount($('#short-term-loans-amount').val()) : 0;
                const longTermLoans = $('#long-term-loans').val() === 'yes' ? parseInputAmount($('#long-term-loans-amount').val()) : 0;
                const goalAmount = parseInputAmount($('#goal-amount').val());
                const monthlyIncome = parseInputAmount($('#monthly-income').val());
                const incomeReplacementYears = parseInt($('#income-replacement-years').val()) || 0;

                // Calculate income replacement and total life insurance required
                const incomeReplacement = monthlyIncome * 12 * incomeReplacementYears;
                const totalLifeInsuranceRequired = shortTermLoans + longTermLoans + incomeReplacement + goalAmount;

                // Calculate family members' insurance based on age
                const memberAges = [
                    parseInt($('#family-member-1-age').val()) || 0,
                    parseInt($('#family-member-2-age').val()) || 0,
                    parseInt($('#family-member-3-age').val()) || 0
                ];
                const memberInsurance = memberAges.map(age => {
                    if (age < 25) return 500000;
                    if (age >= 25 && age <= 40) return 1000000;
                    if (age > 40) return 2000000;
                    return 0;
                });

                // Update the results section
                $('#short-term-loans-outstanding').text(formatNumber(shortTermLoans));
                $('#long-term-loans-outstanding').text(formatNumber(longTermLoans));
                $('#goal-required').text(formatNumber(goalAmount));
                $('#life-insurance-required').text(formatNumber(totalLifeInsuranceRequired));

                // Display member insurance details with icons
                $('#member-insurance').html(
                    memberInsurance.map((insurance, idx) => {
                        const icon = getAgeIcon(memberAges[idx]);
                        return `<div class="d-flex align-items-center">
                                ${icon}<span>Member ${idx + 1} (Age ${memberAges[idx]}): ₹${formatNumber(insurance)}</span>
                            </div>`;
                    }).join('')
                );

                // Show the result section
                $('#result-section').show();
            });
        });
    </script>


</body>

</html>