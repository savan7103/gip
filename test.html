<!DOCTYPE html>
<html lang="en-US" dir="ltr">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Integratedindia</title>
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicons/fiveicon.ico" />
    <meta name="theme-color" content="#ffffff" />
    <link href="assets/css/theme.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="assets/css/Bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
</head>

<style>
    /* Custom styling for checkboxes */
    .form-check-input:checked {
        background-color: #28a745;
        /* Green color for checked */
        border-color: #28a745;
    }

    .form-check-input:focus {
        box-shadow: none;
    }

    .form-check-input {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        border: 2px solid #143980;
        background-color: #fff;
        transition: all 0.3s ease;
    }

    .form-check-label {
        font-size: 16px;
        padding-top: 3px;
    }

    /* Hover effect */
    .form-check-input:checked+.form-check-label {
        color: #28a745;
        /* Green when selected */
    }
    .form-label{
        font-weight: bold;
    }
    .form-check {
        margin-bottom: 10px;
    }

    /* Add some space around checkboxes */
    .goal-checkbox {
        margin-right: 15px;
    }

    /* Style the wrapper for a more modern feel */
    .checkbox-wrapper {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
    }
</style>

<body>

    <div class="bg-b">
        <div class="container bg-transparent ">
            <a class="navbar-brand " href="#"><img class="my-3"
                    src="assets/images/integrated-enterprises-india-pvt-ltd.webp" style="width:350px;" alt=""></a>
        </div>
    </div>

    <section class="">
        <div class="container pt-5 pb-120">
            <div class="row">
                <div class="col-md-8">
                    <h1 class="text-center mb-4">Financial Goal Planner</h1>

                    <!-- Form -->
                    <form id="goalForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="age" class="form-label">Age</label>
                                <input type="number" class="form-control" id="age" required>
                            </div>
                            <div class="col-md-6">
                                <label for="income" class="form-label">Annual Income</label>
                                <input type="text" oninput="formatCurrency(this)" class="form-control" id="income"
                                    required>
                            </div>
                        </div>

                        <!-- Multi-select for Goal type -->
                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label class="form-label">Select Your Goal</label><br>
                                <div class="checkbox-wrapper">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input goal-checkbox" id="education"
                                            value="Education">
                                        <label class="form-check-label" for="education">Education</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input goal-checkbox" id="marriage"
                                            value="Marriage">
                                        <label class="form-check-label" for="marriage">Marriage</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input goal-checkbox" id="travel"
                                            value="Travel/Holidays">
                                        <label class="form-check-label" for="travel">Travel/Holidays</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input goal-checkbox" id="retirement"
                                            value="Retirement">
                                        <label class="form-check-label" for="retirement">Retirement</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input goal-checkbox" id="house"
                                            value="House">
                                        <label class="form-check-label" for="house">House</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input goal-checkbox" id="car"
                                            value="Car">
                                        <label class="form-check-label" for="car">Car</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="goalYear" class="form-label">Goal Accomplishment Year</label>
                                <!-- Dropdown for goal year selection -->
                                <select id="goalYear" class="form-control" required>
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="targetAmount" class="form-label">Target Amount</label>
                                <input type="text" oninput="formatCurrency(this)" class="form-control mt-2" id="targetAmount"
                                    required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="expectedReturn" class="form-label">Expected Return (%)</label>
                                <input type="number" step="0.01" class="form-control" id="expectedReturn" required>
                            </div>
                            <div class="col-md-6">
                                <label for="currentSavings" class="form-label">Current Savings</label>
                                <input type="text" oninput="formatCurrency(this)" class="form-control"
                                    id="currentSavings" required>
                            </div>
                        </div>

                        <!-- New input fields for Investment Type -->
                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label class="form-label">Investment Type</label>
                                <div class="d-flex gap-4">
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" name="investmentType"
                                            id="oneTimeCheckbox">
                                        <label class="form-check-label" for="oneTimeCheckbox">Lumpsum</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" name="investmentType" id="sipCheckbox">
                                        <label class="form-check-label" for="sipCheckbox">Monthly SIP</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="radio" class="form-check-input" name="investmentType"
                                            id="bothCheckbox">
                                        <label class="form-check-label" for="bothCheckbox">Both</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Fields for Lumpsum and SIP percentages (hidden by default) -->
                        <div class="row mb-3" id="investmentFields" style="display: none;">
                            <div class="col-md-6">
                                <label for="oneTimeInvestment" class="form-label">One Time Investment (%)</label>
                                <input type="number" class="form-control" id="oneTimeInvestment"
                                    placeholder="Enter Lumpsum %" required>
                            </div>
                            <div class="col-md-6">
                                <label for="monthlySIP" class="form-label">Monthly SIP (%)</label>
                                <input type="number" class="form-control" id="monthlySIP" placeholder="Enter SIP %"
                                    required>
                            </div>
                            <small class="text-danger" id="errorMessage" style="display: none;">The total of Lumpsum and
                                SIP percentages must equal 100%.</small>
                        </div>


                        <button type="submit" class="btn btn-primary" id="calculateButton" disabled>Calculate</button>
                    </form>

                    <!-- Results Section -->
                    <div class="result alert alert-success mt-4" id="resultContainer" style="display: none;">
                        <h4>Calculation Results</h4>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Details</th>
                                    <th>Amount</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Target Savings Amount</td>
                                    <td colspan="2" id="targetSavings">₹0</td>
                                </tr>
                                <tr>
                                    <td>Goal Accomplishment Year</td>
                                    <td colspan="2" id="goalYearResult">0</td>
                                </tr>
                                <tr>
                                    <td>Your Current Savings</td>
                                    <td colspan="2" id="currentSavingsResult">₹0</td>
                                </tr>
                                <tr>
                                    <td>Current Savings Growth</td>
                                    <td colspan="2" id="currentGrowth">₹0</td>
                                </tr>
                                <tr>
                                    <td>One Time Investment</td>
                                    <td id="oneTime100">₹0</td>
                                    <!-- <td id="oneTime50">₹0</td> -->
                                </tr>
                                <tr>
                                    <td>Monthly SIP</td>
                                    <td id="sip100">₹0</td>
                                    <!-- <td id="sip50">₹0</td> -->
                                </tr>
                                <tr>
                                    <td>Selected Goals</td>
                                    <td colspan="2" id="selectedGoals">None</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="col-md-4 mb-3 mb-md-0 exist-img">
                    <img src="assets/images/platform.webp" class="img-fluid" alt="accordion" />
                </div>
            </div>
        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        function formatCurrency(input) {
            let value = input.value.replace(/[^0-9.]/g, '');  // Allow only digits and decimal
        
            // Use the 'en-IN' locale for Indian number formatting
            let formattedValue = new Intl.NumberFormat('en-IN').format(value);
        
            input.value = formattedValue;  // Set the formatted value
        }
        
        // Generate a range of future years
        function generateYearOptions() {
            const currentYear = new Date().getFullYear();
            const yearSelect = $('#goalYear');

            // Clear existing options
            yearSelect.empty();

            // Add the current year
            yearSelect.append(`<option value="${currentYear}">${currentYear}</option>`);

            // Add the next 40 years
            for (let i = 1; i <= 40; i++) {
                const year = currentYear + i;
                yearSelect.append(`<option value="${year}">${year}</option>`);
            }
        }
        $(document).ready(function () {
            // Show/hide investment fields based on radio selection
            $('input[name="investmentType"]').on('change', function () {
                const selectedType = $(this).attr('id');
                if (selectedType === 'bothCheckbox') {
                    $('#investmentFields').show();
                } else {
                    $('#investmentFields').hide();
                    $('#oneTimeInvestment').val("");
                    $('#monthlySIP').val("");
                    $('#errorMessage').hide();
                    $('#calculateButton').prop('disabled', false); // Enable button for single selections
                }
            });

            // Validate total percentage for "Both" option
            $('#oneTimeInvestment, #monthlySIP').on('input', function () {
                const oneTimeValue = parseFloat($('#oneTimeInvestment').val()) || 0;
                const sipValue = parseFloat($('#monthlySIP').val()) || 0;
                if (oneTimeValue + sipValue !== 100) {
                    $('#errorMessage').show();
                    $('#calculateButton').prop('disabled', true);
                } else {
                    $('#errorMessage').hide();
                    $('#calculateButton').prop('disabled', false);
                }
            });
        });
        $(document).ready(function () {
            // Populate the goal year dropdown with future years
            generateYearOptions();

            // Simulate API call for demo data
            getDemoData().then((demoData) => {
                $('#age').val(demoData.age);
                $('#income').val(demoData.income.toLocaleString());
            });

            $(document).ready(function () {
                // Toggle investment fields based on selected investment type
                $('input[name="investmentType"]').on('change', function () {
                    const selectedType = $('input[name="investmentType"]:checked').attr('id');

                    // Show or hide the Lumpsum and SIP fields based on the selection
                    if (selectedType === 'bothCheckbox') {
                        $('#investmentFields').show();
                    } else {
                        $('#investmentFields').hide();
                    }
                });

                $('#goalForm').on('submit', function (e) {
                    e.preventDefault();
                
                    // Validate checkboxes and inputs
                    const isLumpsumChecked = $('#oneTimeCheckbox').is(':checked');
                    const isSIPChecked = $('#sipCheckbox').is(':checked');
                    const isBothChecked = $('#bothCheckbox').is(':checked');
                
                    const oneTimeValue = parseFloat($('#oneTimeInvestment').val()) || 0;
                    const sipValue = parseFloat($('#monthlySIP').val()) || 0;
                    const totalInvestment = oneTimeValue + sipValue;
                
                    // Show error message if "Both" is selected and total investment doesn't equal 100%
                    if (isBothChecked && totalInvestment !== 100) {
                        $('#errorMessage').show();
                        return;
                    } else {
                        $('#errorMessage').hide();
                    }
                
                    // Validate that at least one option is selected
                    if (!isLumpsumChecked && !isSIPChecked && !isBothChecked) {
                        alert("Please select at least one investment option: Lumpsum, SIP, or Both.");
                        return;
                    }
                
                    // Retrieve form data
                    const targetAmount = parseFloat($('#targetAmount').val().replace(/,/g, ''));
                    const currentSavings = parseFloat($('#currentSavings').val().replace(/,/g, ''));
                    const expectedReturn = parseFloat($('#expectedReturn').val()) / 100;
                    const goalYear = parseInt($('#goalYear').val());
                    const currentYear = new Date().getFullYear();
                    const tenure = goalYear - currentYear;
                
                    if (tenure <= 0) {
                        alert("Goal accomplishment year must be in the future.");
                        return;
                    }
                
                    // Calculate growth of current savings
                    const currentSavingsGrowth = currentSavings * Math.pow(1 + expectedReturn, tenure);
                    const remainingSavings = targetAmount - currentSavingsGrowth;
                
                    let oneTimeInvestmentAmount = 0;
                    let monthlySIPAmount = 0;
                
                    // If Lumpsum is selected, calculate one-time investment (no need for percentage)
                    if (isLumpsumChecked) {
                        oneTimeInvestmentAmount = remainingSavings;
                    }
                
                    // If SIP is selected, calculate SIP amount (no need for percentage)
                    if (isSIPChecked) {
                        monthlySIPAmount = remainingSavings / ((Math.pow(1 + expectedReturn / 12, tenure * 12) - 1) / (expectedReturn / 12));
                    }
                
                    // If Both is selected, calculate one-time and SIP amounts based on entered percentages
                    if (isBothChecked) {
                        if (oneTimeValue + sipValue !== 100) {
                            $('#errorMessage').show();
                            return;
                        }
                        oneTimeInvestmentAmount = remainingSavings * (oneTimeValue / 100);
                        monthlySIPAmount = remainingSavings * (sipValue / 100) / ((Math.pow(1 + expectedReturn / 12, tenure * 12) - 1) / (expectedReturn / 12));
                    }
                
                    // Get selected goals
                    let selectedGoals = [];
                    $('.goal-checkbox:checked').each(function () {
                        selectedGoals.push($(this).val());
                    });
                    const selectedGoalsText = selectedGoals.length > 0 ? selectedGoals.join(", ") : "None";
                
                    // Update the results table
                    $('#targetSavings').text(`₹${targetAmount.toLocaleString()}`);
                    $('#goalYearResult').text(goalYear);
                    $('#currentSavingsResult').text(`₹${currentSavings.toLocaleString()}`);
                    $('#currentGrowth').text(`₹${currentSavingsGrowth.toLocaleString()}`);
                    $('#oneTime100').text(`₹${oneTimeInvestmentAmount.toLocaleString()}`);
                    $('#sip100').text(`₹${monthlySIPAmount.toLocaleString()}`);
                    $('#selectedGoals').text(selectedGoalsText);
                
                    // Show the results section
                    $('#resultContainer').fadeIn();
                });
                
                // Handle radio button changes to toggle 'required' attribute and show/hide investment fields
                $('input[name="investmentType"]').on('change', function () {
                    const isLumpsumChecked = $('#oneTimeCheckbox').is(':checked');
                    const isBothChecked = $('#bothCheckbox').is(':checked');
                    
                    // Show or hide investment fields based on selection
                    if (isBothChecked) {
                        $('#investmentFields').show();  // Show the input fields for Lumpsum and SIP
                        $('#oneTimeInvestment').attr('required', 'required');
                        $('#monthlySIP').attr('required', 'required');
                    } else {
                        $('#investmentFields').hide();  // Hide the input fields for Lumpsum and SIP
                        $('#oneTimeInvestment').removeAttr('required');
                        $('#monthlySIP').removeAttr('required');
                    }
                
                    // If neither Lumpsum nor SIP is selected, hide the fields
                    if (!isLumpsumChecked && !isSIPChecked) {
                        $('#investmentFields').hide();
                    }
                });
                
                // Handle radio button changes to toggle 'required' attribute
                $('input[name="investmentType"]').on('change', function () {
                    const isLumpsumChecked = $('#oneTimeCheckbox').is(':checked');

                    // Show or hide investment fields based on selection
                    if (isLumpsumChecked) {
                        $('#investmentFields').hide();
                        $('#oneTimeInvestment').removeAttr('required');
                        $('#monthlySIP').removeAttr('required');
                    } else {
                        $('#investmentFields').show();
                        $('#oneTimeInvestment').attr('required', 'required');
                        $('#monthlySIP').attr('required', 'required');
                    }
                });
            });


            // Simulated API call for demo data
            function getDemoData() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ age: 30, income: 600000 });
                    }, 1000);
                });
            }

            // Generate a range of future years
            function generateYearOptions() {
                const currentYear = new Date().getFullYear();
                const yearSelect = $('#goalYear');

                // Clear existing options
                yearSelect.empty();

                // Add the current year
                yearSelect.append(`<option value="${currentYear}">${currentYear}</option>`);

                // Add the next 40 years
                for (let i = 1; i <= 40; i++) {
                    const year = currentYear + i;
                    yearSelect.append(`<option value="${year}">${year}</option>`);
                }
            }
        });
    </script>
</body>

</html>